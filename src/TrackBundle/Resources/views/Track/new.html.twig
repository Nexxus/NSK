{% extends 'base.html.twig' %}
{% trans_default_domain "product" %}

{% block body %}
    <h1>Create a New Product</h1>
    
    {% if error_msg is defined %}
        
        {% if error_msg == 'DuplicateSku' %}
            <div class="alert alert-danger">
                <strong>Error:</strong>
                
                {% trans %} SKU code already exists.{% endtrans %}
            </div>
        {% endif %}
        
    {% endif %}
    <div class="container">
    {{ form_start(form, {'attr': {'class': 'form-horizontal'} }) }}
        {{ form_errors(form) }}
            <div id="toggler" class="form-group">
                <label class="control-label col-lg-2">
                     existing barcode?
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.checkbox) }}
                </div>
            </div>
            <div id="toggle" class="form-group">
                <label class="control-label col-lg-2">
                     scan existing barcode
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.sku) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Name {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.name) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Quantity {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.quantity) }}
                </div>
            </div>
            {% if form.price is not null %}
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Price {% endtrans %}
                </label>
                <div class="col-lg-10">
                    &euro;&nbsp;{{ form_widget(form.price) }}
                </div>
            </div>
            {% endif %}
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Description {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.description) }}
                </div>
            </div>
                <div class="form-group">
                    <label class="control-label col-lg-2">
                        {% trans %} Type {% endtrans %}
                    </label>
                    <div class="col-lg-10">
                        {{ form_widget(form.type) }}
                    </div>
                </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Status {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.status, {'choice_translation_domain': 'status'} ) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Location {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.location) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Brand {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.brand) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Department {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.department) }}
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-lg-2">
                    {% trans %} Owner {% endtrans %}
                </label>
                <div class="col-lg-10">
                    {{ form_widget(form.owner) }}
                </div>
            </div>
            {{ form_row(form._token) }}
            <div class="form-group"> 
                <div class="col-lg-offset-2 col-lg-10">
                    <input type="submit" value="Save" /> 
                    x
                    {{ form_widget(form.saveAmount) }}
                </div>
            </div>
        {{ form_end(form) }}
    </div>
    <ul>
        <li>
            <a href="{{ path('track_index') }}">Back to the list</a>
        </li>
    </ul>
{% endblock %}

{% block javascripts %}
    <script>
        $(document).ready(function(){
            $("#form_checkbox").click(function(){
                // if 'generate new' is selected this wil input a temp. value
                if ($( "#form_checkbox" ).val() == 0) {
                    $( "#toggle" ).hide();
                    $( "#form_sku" ).val( '1' );
                //    emty the field and make it avalable for scanning
                } else {
                    $( "#form_sku" ).val( undefined );
                    $( "#toggle" ).show();
                }
            });
        });
        // disables enter key on the scanner field
        $(document).ready(function() {
            $("#form_sku").bind("keypress", function(e) {
                if (e.keyCode == 13) {
                    return false;
                }
            });
        });
    </script>
{% endblock %}